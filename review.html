<html lang="ar">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>كيان للتسويق العقارى</title>
    <link rel="icon" href="logo2.png" sizes="32×32">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet"/>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }
        .fade-in {
            animation: fadeIn 2s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #fff;
            display: flex;
            justify-content: cente;
            align-items: cente;
            z-index: 50;
        }
        .loading-screen img {
            animation: spin 2s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .sd{
            color: red;
        }

        .animated-text {
            position: relative;
            font-size: 35px;
            font-weight: bold;
            color:blue;
            animation: moveText 12s infinite;
            font-family: DecoType Naskh Variants;
        }

        @keyframes moveText {
            0% {
                transform: translateY(100%);
                opacity: 0;
            }
            25% {
                transform: translateY(0);
                opacity: 1;
            }
            75% {
                transform: translateY(0);
                opacity: 1;
            }
            100% {
                transform: translateY(-100%);
                opacity: 0;
            }
        }

        .py-2{
        border-bottom: 1.05px solid white;
     }

    </style>
</head>
<body class="bg-gray-100 text-gray-900 fade-in">
    <!-- Loading Screen -->
   
    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-3 shadow-lg" style="position: fixed; top: 0; width:100%; z-index: 1000;">
        <div class="container mx-auto flex justify-between items-center">
            <img src="ka.png" width="100" height="100">
            <nav>
                <ul class="hidden md:flex space-x-4">
                    <li><a class="hover:underline" href="index.html">الرئيسية</a></li>
                    <li><a class="hover:underline" href="review.html">اراء العملاء</a></li>
                    <li><a class="hover:underline" href="abute.html">من نحن</a></li>
                    <li><a class="hover:underline" href="conect.html">تواصل معنا</a></li>
                </ul>
                <div class="md:hidden">
                    <button id="menu-button" class="text-white focus:outline-none">
                        <i class="fas fa-bars text-2xl"></i>
                    </button>
                </div>
            </nav>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-gradient-to-r from-blue-500 to-purple-600 text-white p-4">
            <ul>
                <li class="py-2"><a  href="index.html">&#127968;الرئيسية</a></li>
                <li class="py-2"><a  href="abute.html">&#128712;من نحن</a></li>
                <li class="py-2"><a  href="review.html">&#128221;اراء العملاء</a></li>
                <li class="py-2"><a  href="conect.html">&#128222;تواصل معنا</a></li>
            </ul>
        </div>
    </header>
    <!-- Main Content -->
    <main class="container mx-auto p-6">
        
    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold text-center mb-6"> آراء العملاء</h1>
        <div class="bg-white p-6 rounded-lg shadow-lg">
            <form id="reviewForm" class="space-y-4">
                <div>
                    <label for="name" class="block text-sm font-medium text-gray-700">الاسم</label>
                    <input type="text" id="name" name="name" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" maxlength="14"  required>
                </div>
                <div>
                    <label for="comment" class="block text-sm font-medium text-gray-700">التعليق</label>
                    <textarea id="comment" name="comment" rows="4" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" maxlength="25" placeholder="اقصى عدد للحروف 25 حرف" required></textarea>
                </div>
                <div>
                    <label for="rating" class="block text-sm font-medium text-gray-700">عدد النجوم</label>
                    <select id="rating" name="rating" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required>
                        <option value="" selected disabled>اختر التقييم</option>
                        <option value="1">1 نجمة</option>
                        <option value="2">2 نجوم</option>
                        <option value="3">3 نجوم</option>
                        <option value="4">4 نجوم</option>
                        <option value="5">5 نجوم</option>
                    </select>
                </div>
                <div>
                    <button type="submit" class="w-full bg-blue-500 text-white p-2 rounded-md">قيم الان</button>
                </div>
            </form>
        </div>
        <div class="mt-8">
            <center>
            <h2 class="text-2xl font-bold mb-4">التقييمات</h2>
        </center>
            <div id="reviews" class="space-y-4" style="bottom: 50px; position: relative;">
                <!-- سيتم عرض التقييمات هنا -->
            </div>
        </div>
    </div>
            
    </main>
    <!-- Footer -->
    <footer class="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-4" style="position: fixed; bottom: 0; width:100%;">
        <div class="container mx-auto text-center">
            <p>© جميع الحقوق محفوظة . كيان للتسويق العقارى 2024</p>
        </div>
    </footer>

   

    <script type="module">
document.getElementById('menu-button').addEventListener('click', function(event) {
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenu.classList.toggle('hidden'); // تبديل حالة الإخفاء والإظهار
    event.stopPropagation(); // منع انتشار الحدث
});

document.addEventListener('click', function(event) {
    const mobileMenu = document.getElementById('mobile-menu');
    const menuButton = document.getElementById('menu-button');
    const header = document.querySelector('header'); // تحديد عنصر `header`
    
    // التحقق إذا كان النقر خارج القائمة والزر وأيضًا ليس على `header`
    if (!mobileMenu.contains(event.target) && 
        !menuButton.contains(event.target) && 
        !header.contains(event.target)) {
        mobileMenu.classList.add('hidden');
    }
});
        window.addEventListener('load', function() {
            const loadingScreen = document.getElementById('loading-screen');
            loadingScreen.style.display = 'none';
            document.getElementById('background-music').play();
        });

        // إعداد Firebase
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js';
        import { getFirestore, collection, addDoc, getDocs, query, orderBy } from 'https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyAILbDyWQb3g4EXfY6yrkzPBpevW_yW934",
            authDomain: "kayan-42a30.firebaseapp.com",
            projectId: "kayan-42a30",
            storageBucket: "kayan-42a30.appspot.com",
            messagingSenderId: "1057076746679",
            appId: "1:1057076746679:web:f3e58e1ca3a444bb257032",
            measurementId: "G-MRJYKH2V0V"
        };

        // تهيئة Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // حفظ التقييم في Firestore
        async function saveReview(review) {
            try {
                const docRef = await addDoc(collection(db, "reviews"), {
                    name: review.name,
                    comment: review.comment,
                    rating: review.rating,
                    timestamp: new Date() // إضافة الوقت الحالي
                });
                console.log("تم إضافة التقييم بنجاح: ", docRef.id);
            } catch (error) {
                console.error("حدث خطأ أثناء إضافة التقييم: ", error);
            }
        }

        // عرض التقييمات من Firestore
        async function displayReviews() {
            const reviewsContainer = document.getElementById('reviews');
            reviewsContainer.innerHTML = ''; // مسح المحتوى السابق

            // جلب التقييمات من Firestore
            const q = query(collection(db, "reviews"), orderBy("timestamp", "desc"));
            const querySnapshot = await getDocs(q);
            querySnapshot.forEach((doc) => {
                const review = doc.data();
                const reviewElement = document.createElement('div');
                reviewElement.classList.add('bg-white', 'p-4', 'rounded-lg', 'shadow-lg');
                reviewElement.innerHTML = `
                    <div class="flex items-center mb-2">
                        <img src="clients.png" alt="صورة رمزية للمستخدم" class="w-10 h-10 rounded-full mr-4">
                        <div>
                            <h3 class="text-lg font-bold">${review.name}</h3>
                            <div class="text-yellow-500">
                                ${'<i class="fas fa-star"></i>'.repeat(review.rating)}
                                ${'<i class="far fa-star"></i>'.repeat(5 - review.rating)}
                            </div>
                        </div>
                    </div>
                    <p>${review.comment}</p>
                `;
                reviewsContainer.appendChild(reviewElement);
            });
        }

        // إضافة تقييم جديد
        document.getElementById('reviewForm').addEventListener('submit', async function(event) {
            event.preventDefault(); // منع إرسال النموذج

            const name = document.getElementById('name').value;
            const comment = document.getElementById('comment').value;
            const rating = parseInt(document.getElementById('rating').value, 10);

            const review = { name, comment, rating };

            // حفظ التقييم في Firestore
            saveReview(review);

            // تحديث عرض التقييمات
            displayReviews();

            // إعادة تعيين النموذج
            event.target.reset();
        });

        // عرض التقييمات عند تحميل الصفحة
        displayReviews();

        if ('scrollRestoration' in history) {
        history.scrollRestoration = 'manual';
    }
    </script>
</body>

</html>
